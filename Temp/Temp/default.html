<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Temperature Monitor</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.2.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.2.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.2.0/js/ui.js"></script>

    <!-- Temp references -->
    <link href="/css/default.css" rel="stylesheet" />

    <!-- Knockoutjs : http://opensource.org/licenses/mit-license.php -->
    <script src="/Scripts/knockout-3.0.0.js"></script>

    <!-- Requirejs https://github.com/jrburke/requirejs/blob/master/LICENSE-->
    <!--<script src="/Scripts/require.js"></script>-->
    <script src="/Scripts/require.min.js"></script>

    <script src="/Scripts/default.js"></script>

</head>
<body>
    <div id="appRoot">

        <!-- Knockout templates -->

        <script type="text/html" id="temperature-template">
            <li>
                <div>
                    <div id="flexMeasurement">
                        <img class="icon" src="images/Temperature-30.png" alt="Temperature" data-bind="attr: {title: ('Sensor id. : '+_page.sensorId) }" />

                        <input class="location" placeholder="Location..." data-bind="value: location, valueUpdate: 'afterkeydown'" />

                        <span class="temperature" data-bind="text: formattedCurrentTemp, style: {color : currentTemp() < 0 ? '#3D76F5' : 'red'}"></span>
                        <!--<label data-bind="visible: $root.settingVM.show24H">Min</label>-->
                        <span class="temperature24H" data-bind="text: formattedLow24H, visible: $root.settingVM.show24H, style: { color : low24H() < 0 ? '#3D76F5' : 'red'}"></span>
                        <!--<label data-bind="visible: $root.settingVM.show24H">Max</label>-->
                        <span class="temperature24H" data-bind="text: formattedHigh24H, visible: $root.settingVM.show24H, style: { color : high24H() < 0 ? '#3D76F5' : 'red'}"></span>

                        <span class="timestamp" data-bind="text: formattedTimestamp"></span>
                    </div>

                   
                    <div id="flexBattery" data-bind="if: (cumulativeOperatingTime() !== undefined) && $root.settingVM.showAdditionalInfo()">
                    <!--<div id="flexBattery">-->

                        <div style="display:inline">
                            <span data-bind="text:  'Reset '+lastBatteryReset()+' ('+cumulativeOperatingTimeString()+')'"></span>
                            
                            <div style="display:inline" data-bind= "if: batteryStatus() === 1" >
                                <img src="images/battery-full.png" />
                            </div>

                            <div style="display:inline" data-bind="if:batteryStatus() === 2 || batteryStatus() === 3" >
                                <img src="images/battery.png" />
                            </div>

                            <div style="display:inline" data-bind="if: batteryStatus() === 4">
                                <img src="images/battery-low.png" />
                            </div>

                            <div style="display:inline" data-bind="if: batteryStatus() === 5">
                                <img src="images/battery-empty.png" />
                            </div>

                            <span data-bind="text: batteryStatusString"></span>
                        </div>

                        
                    </div>
                </div>
               


            </li>

        </script>


        <nav id="appToolbar">


            <div id="flexTemperatureMode">

                <label id="lblTemperatureMonitor">Temperature Monitor</label>

                <div id="divTemperatureMode">
                    <label class="lblTemperatureMode">°C</label>
                    <input class="inpTemperatureMode" type="radio" value="celcius" name="tempGroup" data-bind="checked: settingVM.temperatureMode" />
                    <span id="spanSpace"></span>
                    <label class="lblTemperatureMode">°F</label>
                    <input class="inpTemperatureMode" type="radio" value="fahrenheit" name="tempGroup" data-bind="checked: settingVM.temperatureMode" />
                </div>

                <div id="divMAXMIN">
                    <label id="lblMAXMIN">MIN/MAX</label>
                    <input type="checkbox" data-bind="checked: settingVM.show24H">
                </div>

                <div id="divInfo">
                    <img src="images/info.png"  alt="Information" title="Additional information (i.e operating time)" />
                    <input type="checkbox" data-bind="checked: settingVM.showAdditionalInfo" />
                </div>


                <!--<select data-bind="options: settingVM.temperatureModes, value: settingVM.temperatureMode.value" ></select>-->

                <div id="divENUMERATEDDEVICE">

                    <div data-bind="if: deviceVM.enumeratedDevice().length > 1">
                        <img src="images/ant_usb.png" alt="Device" title="ANT USB device" />
                        <select data-bind="options: deviceVM.enumeratedDevice, optionsText: 'name', value: deviceVM.selectedDevice, optionsCaption: 'Device...', enable:  deviceVM.enumeratedDevice().length > 1"></select>
                    </div>

                    <div data-bind="if: deviceVM.enumeratedDevice().length ===  1">
                        <img src="images/ant_usb.png" alt="ANT USB Device" title="ANT USB device" />
                        <span data-bind="text: deviceVM.enumeratedDevice()[0].name"></span>
                    </div>

                    <div data-bind="if: deviceVM.enumeratedDevice().length ===  0 && deviceVM.enumerationCompleted()">
                        <img src="images/no_ant_usb.png" alt="No ANT USB Device" title="No ANT USB device" />
                        <span>No ANT device found</span>
                    </div>

                </div>
            </div>

        </nav>


        <div id="main">

            <ul id="ulMeasurements" data-bind="template: {name : sensorVM.getTemplateName, foreach: sensorVM.measurement}"></ul>

        </div>


    </div>

</body>
</html>